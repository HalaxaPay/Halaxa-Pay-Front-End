<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Instructions - Halaxa</title>
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@900,700,500,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* Dashboard Theme Colors */
            --primary-color: #1a1a2e;
            --secondary-color: #16213e;
            --accent-primary: #10b981;
            --accent-secondary: #3498db;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --text-light: #9ca3af;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --border-light: rgba(229, 231, 235, 0.8);
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-glow: 0 0 20px rgba(16, 185, 129, 0.15);
            --gradient-primary: linear-gradient(135deg, #10b981, #059669);
            --gradient-secondary: linear-gradient(135deg, #3b82f6, #1d4ed8);
            --gradient-mixed: linear-gradient(135deg, #10b981, #3b82f6);
            --gradient-mixed-secondary: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1));
            --gradient-shine: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --duration-fast: 150ms;
            --duration-normal: 300ms;
            --duration-slow: 500ms;
            --font-primary: 'Satoshi', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background: var(--bg-primary);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow-x: hidden;
            padding: var(--space-4);
            margin: 0;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(16, 185, 129, 0.03) 0%, 
                rgba(59, 130, 246, 0.03) 50%, 
                rgba(16, 185, 129, 0.03) 100%);
            animation: gradientFlow 20s ease infinite;
            z-index: 0;
        }

        @keyframes gradientFlow {
            0%, 100% { 
                background: linear-gradient(135deg, 
                    rgba(16, 185, 129, 0.03) 0%, 
                    rgba(59, 130, 246, 0.03) 50%, 
                    rgba(16, 185, 129, 0.03) 100%);
            }
            50% { 
                background: linear-gradient(135deg, 
                    rgba(59, 130, 246, 0.03) 0%, 
                    rgba(16, 185, 129, 0.03) 50%, 
                    rgba(59, 130, 246, 0.03) 100%);
            }
        }

        /* Floating Orbs */
        .floating-orbs {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.6;
            animation: floatOrb 15s infinite ease-in-out;
        }

        .orb:nth-child(1) {
            width: 300px;
            height: 300px;
            background: var(--gradient-primary);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .orb:nth-child(2) {
            width: 200px;
            height: 200px;
            background: var(--gradient-secondary);
            top: 70%;
            right: 10%;
            animation-delay: 5s;
        }

        .orb:nth-child(3) {
            width: 150px;
            height: 150px;
            background: var(--gradient-mixed);
            top: 40%;
            right: 30%;
            animation-delay: 10s;
        }

        @keyframes floatOrb {
            0%, 100% {
                transform: translate(0, 0) scale(1);
                opacity: 0.6;
            }
            33% {
                transform: translate(30px, -30px) scale(1.1);
                opacity: 0.8;
            }
            66% {
                transform: translate(-20px, 20px) scale(0.9);
                opacity: 0.4;
            }
        }

        /* Main Container Layout */
        .payment-layout {
            display: flex;
            gap: var(--space-6);
            align-items: flex-start;
            justify-content: center;
            max-width: 800px;
            width: 100%;
            position: relative;
            z-index: 10;
        }

        /* Main Container */
        .payment-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            width: 480px;
            flex-shrink: 0;
            position: relative;
            box-shadow: var(--shadow-lg);
            animation: containerSlideIn 0.8s ease-out;
        }

        @keyframes containerSlideIn {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .payment-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-shine);
            opacity: 0;
            border-radius: var(--radius-xl);
            transition: opacity var(--duration-slow) ease;
            pointer-events: none;
        }

        .payment-container:hover::before {
            opacity: 1;
            animation: shimmer 2s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Tips Card */
        .tips-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(16, 185, 129, 0.1);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            width: 240px;
            flex-shrink: 0;
            position: relative;
            box-shadow: var(--shadow-md);
            animation: tipsSlideIn 0.8s ease-out 0.2s both;
        }

        @keyframes tipsSlideIn {
            0% {
                opacity: 0;
                transform: translateX(20px) scale(0.98);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .tips-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-mixed-secondary);
            opacity: 0;
            border-radius: var(--radius-xl);
            transition: opacity var(--duration-normal) ease;
            pointer-events: none;
        }

        .tips-card:hover::before {
            opacity: 0.5;
        }

        .tips-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .tips-icon {
            width: 32px;
            height: 32px;
            background: var(--gradient-mixed);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .tips-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            background: var(--gradient-mixed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tips-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-2);
            margin-bottom: var(--space-3);
            font-size: 0.8rem;
            line-height: 1.4;
            color: var(--text-secondary);
            transition: all var(--duration-normal) ease;
        }

        .tip-item:hover {
            color: var(--text-primary);
            transform: translateX(2px);
        }

        .tip-item:last-child {
            margin-bottom: 0;
        }

        .tip-icon {
            color: var(--accent-primary);
            font-size: 0.7rem;
            margin-top: 2px;
            flex-shrink: 0;
        }

        .trust-badge {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            margin-top: var(--space-4);
            text-align: center;
        }

        .trust-badge-icon {
            color: var(--accent-primary);
            font-size: 1.2rem;
            margin-bottom: var(--space-1);
        }

        .trust-badge-text {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent-primary);
            line-height: 1.3;
        }

        /* Header Section */
        .header-section {
            text-align: center;
            margin-bottom: var(--space-6);
            position: relative;
        }

        .payment-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-mixed);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-4) auto;
            font-size: 1.5rem;
            color: white;
            box-shadow: var(--shadow-glow);
        }

        .headline {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-2);
            background: var(--gradient-mixed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .subheading {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 500;
            line-height: 1.4;
        }

        /* Amount Section */
        .amount-section {
            background: var(--gradient-mixed-secondary);
            border: 1px solid rgba(16, 185, 129, 0.1);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
            text-align: center;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .amount-section::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--gradient-mixed);
            border-radius: var(--radius-lg);
            z-index: -1;
            opacity: 0;
            transition: opacity var(--duration-normal) ease;
        }

        .amount-section:hover::before {
            opacity: 0.1;
        }

        .amount-value {
            font-size: 2.5rem;
            font-weight: 300;
            color: var(--text-primary);
            margin-bottom: var(--space-3);
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', Arial, sans-serif;
            letter-spacing: -0.02em;
        }

        .chain-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--gradient-mixed);
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-md);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: var(--shadow-sm);
        }

        .chain-badge i {
            font-size: 0.9rem;
        }

        /* Transaction ID Section */
        .transaction-section {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin-bottom: var(--space-6);
            backdrop-filter: blur(10px);
        }

        .transaction-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-3);
            text-align: center;
        }

        .transaction-id-container {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            transition: all var(--duration-normal) ease;
        }

        .transaction-id-container:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.1);
        }

        .transaction-id {
            font-family: var(--font-mono);
            font-size: 0.85rem;
            color: var(--text-primary);
            font-weight: 500;
            flex: 1;
            line-height: 1.3;
            cursor: pointer;
            transition: color var(--duration-normal) ease;
        }

        .transaction-id:hover {
            color: var(--accent-primary);
        }

        .transaction-id.expanded {
            word-break: break-all;
        }

        .expand-button {
            background: var(--gradient-secondary);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all var(--duration-normal) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .expand-button:hover {
            transform: translateY(-1px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .expand-button:active {
            transform: translateY(0) scale(0.95);
        }

        .expand-button.expanded {
            background: var(--gradient-primary);
        }

        /* Wallet Address Section */
        .wallet-section {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin-bottom: var(--space-6);
            backdrop-filter: blur(10px);
        }

        .wallet-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-3);
            text-align: center;
        }

        .wallet-address-container {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            transition: all var(--duration-normal) ease;
        }

        .wallet-address-container:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.1);
        }

        .wallet-address {
            font-family: var(--font-mono);
            font-size: 0.85rem;
            color: var(--text-primary);
            font-weight: 500;
            word-break: break-all;
            flex: 1;
            line-height: 1.3;
        }

        .copy-button {
            background: var(--gradient-primary);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all var(--duration-normal) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .copy-button:hover {
            transform: translateY(-1px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .copy-button:active {
            transform: translateY(0) scale(0.95);
        }

        /* Info Section - Simplified */
        .info-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.5);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            margin-bottom: var(--space-6);
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .info-item i {
            color: var(--accent-primary);
            font-size: 0.9rem;
        }

        /* Action Button */
        .action-button {
            width: 100%;
            height: 48px;
            background: var(--gradient-mixed);
            border: none;
            border-radius: var(--radius-lg);
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--duration-normal) ease;
            position: relative;
            overflow: hidden;
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }

        .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-shine);
            transition: left var(--duration-slow) ease;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.25);
        }

        .action-button:hover::before {
            left: 100%;
        }

        .action-button:active {
            transform: translateY(0);
        }

        .action-button i {
            font-size: 1rem;
        }

        /* Footer Info - Simplified */
        .footer-info {
            text-align: center;
        }

        .security-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-primary);
            font-size: 0.75rem;
            font-weight: 600;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-2);
        }

        .contact-info {
            font-size: 0.8rem;
            color: var(--text-light);
            line-height: 1.4;
        }

        .contact-email {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 600;
            transition: color var(--duration-normal) ease;
        }

        .contact-email:hover {
            color: var(--accent-secondary);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            body {
                padding: var(--space-2);
                align-items: flex-start;
                padding-top: var(--space-8);
            }

            .payment-layout {
                flex-direction: column;
                gap: var(--space-4);
                align-items: center;
                justify-content: flex-start;
            }

            .payment-container {
                width: 100%;
                max-width: 480px;
                padding: var(--space-6);
                margin: 0;
            }

            .tips-card {
                width: 100%;
                max-width: 480px;
                padding: var(--space-4);
            }

            .tips-header {
                justify-content: center;
                text-align: center;
            }

            .tip-item {
                font-size: 0.85rem;
            }

            .headline {
                font-size: 1.6rem;
            }

            .subheading {
                font-size: 0.9rem;
            }

            .amount-value {
                font-size: 2.2rem;
            }

            .info-section {
                flex-direction: column;
                gap: var(--space-2);
                text-align: center;
            }

            .wallet-address-container {
                flex-direction: column;
                gap: var(--space-3);
            }

            .copy-button {
                width: 100%;
                height: 40px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: var(--space-2);
                padding-top: var(--space-6);
            }

            .payment-container,
            .tips-card {
                padding: var(--space-4);
            }

            .headline {
                font-size: 1.5rem;
            }

            .amount-value {
                font-size: 2rem;
            }

            .payment-icon {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .tips-title {
                font-size: 0.9rem;
            }

            .tip-item {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="floating-orbs">
        <div class="orb"></div>
        <div class="orb"></div>
        <div class="orb"></div>
    </div>

    <div class="payment-layout">
        <div class="payment-container">
            <div class="header-section">
                <div class="payment-icon">
                    <i class="fas fa-credit-card"></i>
                </div>
                <h1 class="headline">Payment Instructions</h1>
                <p class="subheading">Send the exact amount to complete your payment</p>
            </div>

            <div class="amount-section">
                <div class="amount-value" id="amount-display">$23.50 USDC</div>
                <div class="chain-badge" id="chain-display">
                    <i class="fas fa-link"></i>
                    <span>Polygon</span>
                </div>
            </div>

            <div class="transaction-section">
                <div class="transaction-label">Transaction ID</div>
                <div class="transaction-id-container">
                    <span class="transaction-id" id="transaction-id">0x1234567890abcdef...567890abcdef</span>
                    <button class="expand-button" onclick="expandTransactionId()" aria-label="Expand transaction ID">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>

            <div class="wallet-section">
                <div class="wallet-label">Wallet Address</div>
                <div class="wallet-address-container">
                    <span class="wallet-address" id="wallet-address">0x1234567890abcdef1234567890abcdef12345678</span>
                    <button class="copy-button" onclick="copyWalletAddress()" aria-label="Copy wallet address">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="info-section">
                <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <span>1-3 min confirmation</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-hourglass-half"></i>
                    <span>Wait 1+ min before confirming</span>
                </div>
            </div>

            <button class="action-button" id="confirm-payment">
                <i class="fas fa-check-circle"></i>
                <span>I've Sent the USDC</span>
            </button>

            <div class="footer-info">
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>Blockchain Secured</span>
                </div>
                <div class="contact-info">
                    Need help? <a href="mailto:Halaxa.inc@gmail.com" class="contact-email">Contact Support</a>
                </div>
            </div>
        </div>

        <div class="tips-card">
            <div class="tips-header">
                <div class="tips-icon">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <h2 class="tips-title">Buyer Tips</h2>
            </div>
            <ul class="tips-list">
                <li class="tip-item">
                    <i class="fas fa-check-circle tip-icon"></i>
                    <span>Double-check wallet address before sending</span>
                </li>
                <li class="tip-item">
                    <i class="fas fa-shield-alt tip-icon"></i>
                    <span>Blockchain transactions are irreversible</span>
                </li>
                <li class="tip-item">
                    <i class="fas fa-clock tip-icon"></i>
                    <span>Wait for network confirmation</span>
                </li>
                <li class="tip-item">
                    <i class="fas fa-eye tip-icon"></i>
                    <span>Keep transaction hash for records</span>
                </li>
                <li class="tip-item">
                    <i class="fas fa-headset tip-icon"></i>
                    <span>Contact support if payment fails</span>
                </li>
            </ul>
            <div class="trust-badge">
                <div class="trust-badge-icon">
                    <i class="fas fa-certificate"></i>
                </div>
                <div class="trust-badge-text">Secure & Trusted<br>Payment System</div>
            </div>
        </div>
    </div>

    <script>
        // Function to get URL parameters
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            const amount = params.get('amount') || '0.00';
            const chain = params.get('chain') || 'Polygon';
            const link_id = params.get('link_id') || 'demo';
            const wallet_address = params.get('wallet_address') || '0x742d35Cc6634C0532925a3b844Bc454e4438f44e';
            
            console.log('URL Parameters:', { amount, chain, link_id, wallet_address }); // Debug log
            return { amount, chain, link_id, wallet_address };
        }

        // Function to copy wallet address
        function copyWalletAddress() {
            const walletAddress = document.getElementById('wallet-address').textContent;
            navigator.clipboard.writeText(walletAddress).then(() => {
                alert('Wallet address copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy wallet address:', err);
                alert('Failed to copy wallet address. Please try again.');
            });
        }

        // Function to initialize payment details
        function initializePaymentDetails() {
            const params = getUrlParams();
            console.log('Initializing payment details with params:', params); // Debug log
            
            // Display payment details
            const amountDisplay = document.getElementById('amount-display');
            const chainDisplay = document.getElementById('chain-display');
            const walletAddress = document.getElementById('wallet-address');
            
            if (amountDisplay) {
                amountDisplay.textContent = `$${params.amount} USDC`;
                console.log('Updated amount display:', amountDisplay.textContent); // Debug log
            } else {
                console.error('Amount display element not found!'); // Debug log
            }
            
            if (chainDisplay) {
                chainDisplay.innerHTML = `<i class="fas fa-link"></i><span>${params.chain}</span>`;
                console.log('Updated chain display:', chainDisplay.textContent); // Debug log
            } else {
                console.error('Chain display element not found!'); // Debug log
            }
            
            if (walletAddress) {
                walletAddress.textContent = params.wallet_address;
                console.log('Updated wallet address:', walletAddress.textContent); // Debug log
            } else {
                console.error('Wallet address element not found!'); // Debug log
            }
            
            // Store the current payment details
            const paymentDetails = {
                amount: params.amount,
                chain: params.chain,
                link_id: params.link_id,
                wallet_address: params.wallet_address
            };
            
            localStorage.setItem('currentPayment', JSON.stringify(paymentDetails));
            console.log('Stored payment details:', paymentDetails); // Debug log
        }

        // Function to handle payment confirmation
        function handlePaymentConfirmation() {
            const params = getUrlParams();
            console.log('Handling payment confirmation with params:', params); // Debug log
            
            // Here you would typically verify the payment with your backend
            // For now, we'll simulate a successful payment
            const isPaymentSuccessful = true; // This should be replaced with actual payment verification
            
            if (isPaymentSuccessful) {
                // Store payment status
                localStorage.setItem('paymentStatus', 'success');
                // Redirect to success page with parameters
                const successUrl = `https://halaxapay.netlify.app/success?amount=${params.amount}&chain=${params.chain}&link_id=${params.link_id}&wallet_address=${params.wallet_address}`;
                window.location.href = successUrl;
            } else {
                // Store payment status
                localStorage.setItem('paymentStatus', 'failed');
                // Redirect to failure page with parameters
                const failureUrl = `https://halaxapay.netlify.app/failure?amount=${params.amount}&chain=${params.chain}&link_id=${params.link_id}&wallet_address=${params.wallet_address}`;
                window.location.href = failureUrl;
            }
        }

        // Function to expand transaction ID
        function expandTransactionId() {
            const transactionId = document.getElementById('transaction-id');
            const expandButton = document.querySelector('.expand-button');
            const fullTransactionId = '0x1234567890abcdef1234567890abcdef123456789012345678901234567890abcdef';
            const shortTransactionId = '0x1234567890abcdef...567890abcdef';
            
            if (transactionId.classList.contains('expanded')) {
                // Collapse - show short version
                transactionId.classList.remove('expanded');
                expandButton.classList.remove('expanded');
                transactionId.textContent = shortTransactionId;
                expandButton.innerHTML = '<i class="fas fa-chevron-down"></i>';
                expandButton.setAttribute('aria-label', 'Expand transaction ID');
            } else {
                // Expand - show full version
                transactionId.classList.add('expanded');
                expandButton.classList.add('expanded');
                transactionId.textContent = fullTransactionId;
                expandButton.innerHTML = '<i class="fas fa-chevron-up"></i>';
                expandButton.setAttribute('aria-label', 'Collapse transaction ID');
            }
        }

        // Function to initialize transaction ID
        function initializeTransactionId() {
            const transactionId = document.getElementById('transaction-id');
            const shortTransactionId = '0x1234567890abcdef...567890abcdef';
            
            if (transactionId) {
                transactionId.textContent = shortTransactionId;
                console.log('Initialized transaction ID:', shortTransactionId);
            }
        }

        // Initialize the page when it loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Payment page loaded'); // Debug log
            initializePaymentDetails();
            initializeTransactionId();
            
            // Add payment confirmation handler
            const confirmButton = document.getElementById('confirm-payment');
            if (confirmButton) {
                confirmButton.addEventListener('click', handlePaymentConfirmation);
                console.log('Payment confirmation handler added'); // Debug log
            } else {
                console.error('Confirm payment button not found!'); // Debug log
            }
        });
    </script>
    <script type="module" src="./supabase-client.js"></script>
</body>
</html>